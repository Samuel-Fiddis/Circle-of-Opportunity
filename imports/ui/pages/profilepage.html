
<template name="profilepage">

    <div id="profile-container" class="container">
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
  <!-- IF UNI THEN DISPLAY STUDENTS AND THEIR STATUS -->
  {{#if uniOwnProfile}}

  <h1> University acceptance portal </h1>

  {{ >studentViewUni}}

  <!-- IF NOT UNI THEN DISPLAY REGULAR PROFILE PAGE -->

  {{else}}

  {{#if ownProfile}}
  <h1>This is your profile page</h1>
  {{else}}
  <h1>Profile page of {{userProfile.name.first}} {{userProfile.name.last}}</h1>
  {{/if}}

  <!-- Loading Donor Interest information if student profile -->


  <div class = "container">

    <!-- Show register interest button only on a students profile page -->
    {{#if student}}

    <!-- not on their own profile -->
    {{#unless ownProfile}}
    <!-- Does not show button if donor has already registered interest -->
    {{#if hasRegisteredInterest}}

    You have already registered interest in this student
    <br>
    <br>

    {{else}}
    <!-- register interest button -->
    <button class = "updateinterest"> Register Interest </button>
    <br>

    {{/if}}
    {{/unless}}

    <!-- Number of donors interested -->
    Number of donors interested : {{userProfile.number_dInterest}}
    <br>

    <!-- information about each donor -->
    Interested Donors:
    <br>
    {{#each userProfile.interestedDonors}}
    id: {{.[0]}}
    {{#with donorInfo @index}}
    Name: {{name.first}} {{name.last}}
    <br>
    {{/with}}
    {{/each}}

    {{else}}
    <!-- information about each student interested in -->
    Registered interest in:
    <br>
    {{#each userProfile.interestStudent}}
    Student id: {{.[0]}}
    {{#with studentInfo @index}}
    Name: {{name.first}} {{name.last}}
    {{/with}}
    {{/each}}

    {{/if}}

  </div>



  <!-- Loading profile information -->
  <div class="container">

    <img class="donorImage" src="{{fileURL donorImage}}">
    <!--{{#with userData}}-->
    Name: {{userProfile.name.first}}  {{userProfile.name.middle}} {{userProfile.name.last}}
    <br>
    Age: {{userProfile.age}}
    <br>

    {{#if ownProfile}}
    Phone: {{userProfile.phone}}
    <br>

    {{#each userProfile.emails}}
    <div>Email: {{address}}</div>
    {{/each}}
    {{/if}}



    <!--Address is formatted to only show full address if it is the full profile-->
    Address: {{userProfile.address.street}}{{#if ownProfile}}, {{/if}}{{userProfile.address.city}}, {{userProfile.address.country}}{{#if ownProfile}}, {{/if}}{{userProfile.address.zipCode}}
    <br>
    Bio: {{userProfile.bio}}
    <br>
    University: {{userProfile.uni_info.uni}}
    <br>
    Program: {{userProfile.uni_info.program}}
    <br>
    Status: {{userProfile.uni_info.eStatus}}
    <br>

    <!-- Add in the ethereum functions here and take out of studentView -->
    Ethereum public key: <a href="https://ropsten.etherscan.io/address/{{userProfile.ethereum}}" class="livefeedhref">{{userProfile.ethereum}}</a>
    <br>
    Ethereum balance: {{balance}}
    <br>
    <!--{{/with}}-->

    {{#if ownProfile}}
    <!-- Submit form button to go to update form -->
    <a href="/updateForm">Update My Profile</a>
    {{else}}

    <input class="donation-input" type="number" name="amount" min =0.001 placeholder="Donation Amount" value=0.1 >
    <button class = "createTrans">Donate To that Student</button>
    <!-- <a href="/donate/{{userProfile._id}}" id="button" >Link to Donate To Student Page</a> -->
    {{/if}}

    {{> livefeed}}
  </div>
  {{/if}}
            </div>
        </div>
    </div>
</template>
