
<template name="profilepage">


  {{#if ownProfile}}
  <h1>This is your profile page</h1>
  {{else}}
  <h1>Profile page of {{userProfile.name.first}} {{userProfile.name.last}}</h1>
  {{/if}}

  <!-- Loading Donor Interest information if student profile -->


  <div class = "container">

    <!-- Show register interest button only on a students profile page -->
    {{#if student}}

    <!-- not on their own profile -->
    {{#unless ownProfile}}
    <!-- Does not show button if donor has already registered interest -->
    {{#if hasRegisteredInterest}}

    You have already registered interest in this student
    <br>
    <br>

    {{else}}
    <!-- register interest button -->
    <button> Register Interest </button>
    <br>

    {{/if}}
    {{/unless}}

    <!-- Number of donors interested -->
    Number of donors interested : {{userProfile.number_dInterest}}
    <br>

    <!-- information about each donor -->
    Interested Donors:
    <br>
    {{#each userProfile.interestedDonors}}
    id: {{.[0]}}
    {{#with donorInfo @index}}
    Name: {{name.first}} {{name.last}}
    <br>
    {{/with}}
    {{/each}}

    {{else}}
    <!-- information about each student interested in -->
    Registered interest in:
    <br>
    {{#each userProfile.interestStudent}}
    Student id: {{.[0]}}
    {{#with studentInfo @index}}
    Name: {{name.first}} {{name.last}}
    {{/with}}
    {{/each}}

    {{/if}}

  </div>



  <!-- Loading profile information -->
  <div class="container">

    <!--{{#with userData}}-->
    Name: {{userProfile.name.first}}  {{userProfile.name.middle}} {{userProfile.name.last}}
    <br>
    Age: {{userProfile.age}}
    <br>

    {{#if ownProfile}}
    Phone: {{userProfile.phone}}
    <br>

    {{#each userProfile.emails}}
    <div>Email: {{address}}</div>
    {{/each}}
    {{/if}}

    <!--Address is formatted to only show full address if it is the full profile-->
    Address: {{userProfile.address.street}}{{#if ownProfile}}, {{/if}}{{userProfile.address.city}}, {{userProfile.address.country}}{{#if ownProfile}}, {{/if}}{{userProfile.address.zipCode}}
    <br>
    Bio: {{userProfile.bio}}
    <br>
    University: {{userProfile.uni_info.uni}}
    <br>
    Program: {{userProfile.uni_info.program}}
    <br>
    Status: {{userProfile.uni_info.eStatus}}
    <br>

    <!-- Add in the ethereum functions here and take out of studentView -->
    Ethereum public key: {{userProfile.ethereum}}
    <br>
    Ethereum balance: {{balance}}
    <br>
    <!--{{/with}}-->

    {{#if ownProfile}}
    <!-- Submit form button to go to update form -->
    <a href="/updateForm">Update My Profile</a>
    {{else}}
    {{#if student}}
    <a href="/profilepage/{{userProfile._id}}">Donate To Student</a>
    <br>
    {{/if}}
    {{/if}}

  </div>
<!--
  {{else}}
  <h1>Please log in (or register) to see and adjust your personal profile page</h1>
  {{/if}}
-->
</template>
